{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { FormControl, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"primeng/api\";\nimport * as i4 from \"src/app/Cliente/Services/usuario.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"primeng/button\";\nimport * as i7 from \"primeng/inputtext\";\nimport * as i8 from \"primeng/toast\";\nimport * as i9 from \"primeng/panel\";\nimport * as i10 from \"primeng/dropdown\";\nimport * as i11 from \"../../header-menu/header-menu.component\";\nfunction CrearUsuarioComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h1\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.titulo);\n  }\n}\nfunction CrearUsuarioComponent_ng_container_13_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const validador_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", validador_r2.message, \" \");\n  }\n}\nfunction CrearUsuarioComponent_ng_container_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CrearUsuarioComponent_ng_container_13_div_1_Template, 2, 1, \"div\", 16);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const validador_r2 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.myform.get(\"documento\").hasError(validador_r2.type) && (ctx_r0.myform.get(\"documento\").dirty || ctx_r0.myform.get(\"documento\").touch));\n  }\n}\nfunction CrearUsuarioComponent_ng_container_21_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const validador_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", validador_r3.message, \" \");\n  }\n}\nfunction CrearUsuarioComponent_ng_container_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CrearUsuarioComponent_ng_container_21_div_1_Template, 2, 1, \"div\", 16);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const validador_r3 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.myform.get(\"username\").hasError(validador_r3.type) && (ctx_r0.myform.get(\"username\").dirty || ctx_r0.myform.get(\"username\").touch));\n  }\n}\nfunction CrearUsuarioComponent_ng_container_29_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const validador_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", validador_r4.message, \" \");\n  }\n}\nfunction CrearUsuarioComponent_ng_container_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CrearUsuarioComponent_ng_container_29_div_1_Template, 2, 1, \"div\", 16);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const validador_r4 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.myform.get(\"password\").hasError(validador_r4.type) && (ctx_r0.myform.get(\"password\").dirty || ctx_r0.myform.get(\"password\").touch));\n  }\n}\nexport let CrearUsuarioComponent = /*#__PURE__*/(() => {\n  class CrearUsuarioComponent {\n    constructor(router, formbuilder, messageService, Usuarioservices, route) {\n      this.router = router;\n      this.messageService = messageService;\n      this.Usuarioservices = Usuarioservices;\n      this.route = route;\n      this.displaychange = new EventEmitter();\n      this.listRoles = [];\n      this.verEditar = false;\n      this.displaybotton = false;\n      this.validation = {\n        documento: [{\n          type: 'required',\n          message: 'El campo es obligatorio'\n        }],\n        username: [{\n          type: 'required',\n          message: 'El campo es obligatorio'\n        }],\n        password: [{\n          type: 'required',\n          message: 'El campo es obligatorio'\n        }]\n      };\n      this.myform = formbuilder.group({\n        documento: new FormControl('', Validators.compose([Validators.required])),\n        username: new FormControl('', Validators.compose([Validators.required])),\n        password: new FormControl('', Validators.compose([Validators.required])),\n        idrol: new FormControl('1', Validators.compose([Validators.required]))\n      });\n      this.Getroles();\n      if (this.UsuarioEditar !== undefined) {\n        this.displaybotton = true;\n        this.showDatos();\n      } else {\n        this.id = null;\n        this.displaybotton = false;\n      }\n    }\n    ngOnInit() {\n      this.showDatos();\n    }\n    showDatos() {\n      if (this.UsuarioEditar !== undefined) {\n        this.myform.get('documento').setValue(this.UsuarioEditar.documento);\n        this.myform.get('username').setValue(this.UsuarioEditar.username);\n        this.myform.get('password').setValue(this.UsuarioEditar.contrasena);\n        this.myform.get('idrol').setValue(this.UsuarioEditar.idrol);\n        this.titulo = \"Editar usuarios\";\n        this.verEditar = true;\n      } else {\n        this.displaybotton = true;\n        this.titulo = \"Usuarios\";\n        this.verEditar = false;\n        this.LimpiarFormulario();\n      }\n    }\n    Getroles() {\n      this.Usuarioservices.GetRoles().subscribe(data => {\n        this.listRoles = data;\n      });\n    }\n    atras() {\n      this.router.navigateByUrl('ListarUsuario');\n    }\n    Save() {\n      if (this.myform.valid) {\n        if (this.UsuarioEditar != undefined) {\n          this.updateUser();\n        } else {\n          this.addUser();\n        }\n      } else {\n        this.addSingle('error', 'Faltan datos por completar');\n      }\n    }\n    addUser() {\n      this.Usuarioservices.Usuario.documento = this.myform.value.documento;\n      this.Usuarioservices.Usuario.username = this.myform.value.username;\n      this.Usuarioservices.Usuario.contrasena = this.myform.value.password;\n      this.Usuarioservices.Usuario.idrol = this.myform.value.idrol;\n      this.Usuarioservices.Add().subscribe(data => {\n        if (data['code'] == 1) {\n          this.LimpiarFormulario();\n          this.addSingle('success', data['descripcion']);\n        } else {\n          this.addSingle('error', data['descripcion']);\n        }\n      }, error => {\n        this.addSingle('error', error.message);\n      });\n    }\n    updateUser() {\n      this.Usuarioservices.Usuario.idUser = this.UsuarioEditar.idUser;\n      this.Usuarioservices.Usuario.documento = this.myform.value.documento;\n      this.Usuarioservices.Usuario.username = this.myform.value.username;\n      this.Usuarioservices.Usuario.contrasena = this.myform.value.password;\n      this.Usuarioservices.Usuario.idrol = this.myform.value.idrol;\n      this.Usuarioservices.update().subscribe(data => {\n        if (data['code'] == 1) {\n          this.displaychange.emit(true);\n        } else {\n          this.addSingle('error', data['descripcion']);\n        }\n      });\n    }\n    LimpiarFormulario() {\n      this.myform.reset();\n    }\n    addSingle(tipo, mensaje) {\n      if (tipo == 'success') {\n        this.messageService.add({\n          severity: 'success',\n          summary: 'Service Message',\n          detail: 'Usuario creado con exito'\n        });\n      } else {\n        this.messageService.add({\n          severity: 'error',\n          summary: 'Error',\n          detail: mensaje\n        });\n      }\n    }\n    static {\n      this.ɵfac = function CrearUsuarioComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || CrearUsuarioComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.MessageService), i0.ɵɵdirectiveInject(i4.UsuarioService), i0.ɵɵdirectiveInject(i1.ActivatedRoute));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: CrearUsuarioComponent,\n        selectors: [[\"app-crear-usuario\"]],\n        inputs: {\n          UsuarioEditar: \"UsuarioEditar\"\n        },\n        outputs: {\n          displaychange: \"displaychange\"\n        },\n        decls: 37,\n        vars: 6,\n        consts: [[3, \"hidden\"], [\"pTemplate\", \"header\"], [\"pButton\", \"\", \"pRipple\", \"\", \"type\", \"button\", \"label\", \"atras\", 1, \"p-button-outlined\", \"p-button-secondary\", 3, \"click\"], [3, \"formGroup\"], [1, \"Top\", \"Center\"], [1, \"flex-form\"], [\"for\", \"documento\"], [\"id\", \"documento\", \"type\", \"text\", \"pInputText\", \"\", \"formControlName\", \"documento\"], [1, \"validation-errors\"], [4, \"ngFor\", \"ngForOf\"], [\"for\", \"username\"], [\"id\", \"username\", \"type\", \"text\", \"pInputText\", \"\", \"formControlName\", \"username\"], [\"for\", \"password\"], [\"id\", \"password\", \"type\", \"password\", \"pInputText\", \"\", \"formControlName\", \"password\"], [\"formControlName\", \"idrol\", \"optionLabel\", \"descripcion\", \"optionValue\", \"idRol\", 3, \"options\"], [\"pButton\", \"\", \"pRipple\", \"\", \"type\", \"button\", \"label\", \"Guardar\", 1, \"p-button-outlined\", 3, \"click\"], [4, \"ngIf\"]],\n        template: function CrearUsuarioComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelement(0, \"app-header-menu\", 0);\n            i0.ɵɵelementStart(1, \"p-panel\");\n            i0.ɵɵtemplate(2, CrearUsuarioComponent_ng_template_2_Template, 2, 1, \"ng-template\", 1);\n            i0.ɵɵelementStart(3, \"button\", 2);\n            i0.ɵɵlistener(\"click\", function CrearUsuarioComponent_Template_button_click_3_listener() {\n              return ctx.atras();\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"form\", 3);\n            i0.ɵɵelement(5, \"p-toast\", 4);\n            i0.ɵɵelementStart(6, \"div\", 5)(7, \"div\")(8, \"label\", 6);\n            i0.ɵɵtext(9, \"Documento\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(10, \"\\u00A0 \");\n            i0.ɵɵelement(11, \"input\", 7);\n            i0.ɵɵelementStart(12, \"div\", 8);\n            i0.ɵɵtemplate(13, CrearUsuarioComponent_ng_container_13_Template, 2, 1, \"ng-container\", 9);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(14, \"div\")(15, \"label\", 10);\n            i0.ɵɵtext(16, \"Usuario\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(17, \"\\u00A0 \");\n            i0.ɵɵelement(18, \"input\", 11);\n            i0.ɵɵtext(19, \"\\u00A0 \");\n            i0.ɵɵelementStart(20, \"div\", 8);\n            i0.ɵɵtemplate(21, CrearUsuarioComponent_ng_container_21_Template, 2, 1, \"ng-container\", 9);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(22, \"div\", 5)(23, \"div\")(24, \"label\", 12);\n            i0.ɵɵtext(25, \"Contrase\\u00F1a\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(26, \"\\u00A0 \");\n            i0.ɵɵelement(27, \"input\", 13);\n            i0.ɵɵelementStart(28, \"div\", 8);\n            i0.ɵɵtemplate(29, CrearUsuarioComponent_ng_container_29_Template, 2, 1, \"ng-container\", 9);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(30, \"div\")(31, \"label\", 10);\n            i0.ɵɵtext(32, \"Usuario\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(33, \"\\u00A0 \");\n            i0.ɵɵelement(34, \"p-dropdown\", 14);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(35, \"div\", 5)(36, \"button\", 15);\n            i0.ɵɵlistener(\"click\", function CrearUsuarioComponent_Template_button_click_36_listener() {\n              return ctx.Save();\n            });\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵproperty(\"hidden\", ctx.verEditar);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"formGroup\", ctx.myform);\n            i0.ɵɵadvance(9);\n            i0.ɵɵproperty(\"ngForOf\", ctx.validation.documento);\n            i0.ɵɵadvance(8);\n            i0.ɵɵproperty(\"ngForOf\", ctx.validation.username);\n            i0.ɵɵadvance(8);\n            i0.ɵɵproperty(\"ngForOf\", ctx.validation.password);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"options\", ctx.listRoles);\n          }\n        },\n        dependencies: [i5.NgForOf, i5.NgIf, i3.PrimeTemplate, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName, i6.ButtonDirective, i7.InputText, i8.Toast, i9.Panel, i10.Dropdown, i11.HeaderMenuComponent]\n      });\n    }\n  }\n  return CrearUsuarioComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}